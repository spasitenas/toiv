### Основные элементы стенда WBdemo-kit v.2:

1. **Датчики температуры 1-wire DS18B20** (поз. 1 и 2) – используются для измерения температуры.
2. **Преобразователь 1-Wire — Modbus RTU WB-M1W2** (поз. 3) – устройство для подключения датчиков температуры по интерфейсу 1-Wire к сети Modbus RTU.
3. **Устройство ИК-управления WB-MIR** (поз. 4) – инфракрасный контроллер для управления ИК-совместимыми устройствами.
4. **Настенный комбинированный датчик WB-MSW v.3** (поз. 5) – датчик, измеряющий температуру, влажность, уровень освещения, концентрацию CO2 и движение.
5. **RGB лента в профиле** (поз. 6) – светодиодная лента для демонстрации управления освещением.
6. **Блок питания HDR-30-24** (поз. 7) – источник питания на 24 В для устройств стенда.
7. **Контроллер Wiren Board** (поз. 8) – центральный элемент системы автоматизации, который управляет подключёнными устройствами и датчиками.
8. **Модуль ввода-вывода WBIO-DO-R10A-8** (поз. 9) – модуль с релейными выходами для управления нагрузками.
9. **Модуль обнаружения протечек WB-MWAC** (поз. 10) – устройство для обнаружения утечек воды.
10. **Диммер светодиодных лент на DIN-рейку WB-MRGBW-D** (поз. 11) – диммер для управления яркостью и цветом светодиодных RGBW лент.
11. **Комбинированный датчик WB-MS** (поз. 12) – многофункциональный датчик, измеряющий температуру, влажность, освещённость и движение.
12. **Электросчётчик "Милур 307"** (поз. 13) – счётчик электроэнергии.
13. **Автомат питания набора (L1)** (поз. 14), **Автомат питания вентилятора (L2)** (поз. 15), **Автомат питания контактора (L3)** (поз. 16) – автоматические выключатели для подачи и защиты питания различных элементов стенда.
14. **Трансформаторы тока 25 А** (поз. 17-19) – датчики для измерения силы тока.
15. **Контактор 220 В** (поз. 20) – устройство для коммутации высоковольтных цепей.
16. **Модуль реле 3-канальный WB-MR3** (поз. 21) – модуль для управления нагрузками через реле.
17. **Многоканальный измеритель WB-MAP12H** (поз. 22) – устройство для измерения параметров электросети.
18. **Датчик протечки** (поз. 23) – устройство для обнаружения утечек воды.
19. **Индикаторы** (поз. 24-26) – сигнальные индикаторы для отображения состояния различных систем.
20. **Кнопки управления** (поз. 27-29) – кнопки для ручного управления различными функциями, такими как подача воды и сброс аварии.
21. **Импульсный счётчик расхода воды** (поз. 30) – устройство для измерения расхода воды.
22. **Шаровой кран с электроприводом** (поз. 31) – клапан для управления подачей воды.
23. **Вентилятор** (поз. 32) – устройство для демонстрации управления вентиляцией.

### Глобальные и локальные контроллеры:

- **Глобальные контроллеры** – это центральные устройства, которые управляют всей системой автоматизации или несколькими локальными системами. Они обрабатывают данные от датчиков и устройств, принимают решения и отправляют команды на исполнительные устройства. Примером глобального контроллера является **контроллер Wiren Board** (поз. 8), который координирует работу всех элементов стенда.

- **Локальные контроллеры** – это устройства, которые управляют отдельными подсистемами или отдельными устройствами. Например, локальные контроллеры могут управлять освещением, климатом или другими мелкими

### Примеры глобальных и локальных контроллеров на базе **Wiren Board**:

#### 1. **Глобальные контроллеры Wiren Board**:

Глобальные контроллеры отвечают за управление всей системой автоматизации, координацию работы между локальными контроллерами и сбор данных. Они могут управлять большой инфраструктурой, обрабатывая информацию с разных датчиков и подключённых устройств.

##### Примеры:
- **Контроллер Wiren Board 6** (поз. 8 в таблице):
  - Это универсальный контроллер, который используется для управления процессами в умном доме, на производстве или в других системах автоматизации. Он поддерживает множество интерфейсов (Modbus, 1-Wire, MQTT и другие), что позволяет ему взаимодействовать с различными устройствами и системами.
  - В роли глобального контроллера он может координировать работу локальных контроллеров, собирать данные от датчиков, управлять освещением, климатическими системами, безопасностью и т.д.
  
- **Wiren Board 7**:
  - Новая версия контроллера, используется как центральный элемент системы автоматизации. Он может управлять процессами в умном доме, автоматизации зданий, промышленности и других системах, требующих централизованного контроля.
  - Работает с разными протоколами (Modbus, MQTT, Zigbee и т.д.), что позволяет интегрировать различные устройства в систему.

#### 2. **Локальные контроллеры Wiren Board**:

Локальные контроллеры управляют отдельными подсистемами или устройствами и обычно работают на определённой ограниченной области или функциональности (например, управление освещением, климатом или безопасностью). Эти устройства могут работать автономно или под управлением глобального контроллера.

##### Примеры:
- **Модуль реле WB-MR3** (поз. 21 в таблице):
  - Это локальный контроллер, который используется для управления электрическими нагрузками (освещение, электроприводы и т.д.). Он поддерживает интерфейс Modbus RTU и может работать с глобальным контроллером, но также способен выполнять задачи самостоятельно.
  - В системе автоматизации может отвечать за управление освещением или бытовыми приборами в определённой зоне.

- **Модуль ввода-вывода WBIO-DO-R10A-8** (поз. 9 в таблице):
  - Этот модуль может быть использован как локальный контроллер для управления релейными выходами. Он позволяет подключать и управлять различными устройствами и механизмами, такими как электроприборы или двигатели.
  
- **Модуль обнаружения протечек WB-MWAC** (поз. 10 в таблице):
  - Работает как локальный контроллер для мониторинга утечек воды. В случае обнаружения утечки может сразу же отправить сигнал на глобальный контроллер или автономно перекрыть водоснабжение через шаровой кран с электроприводом.
  
- **Устройство ИК-управления WB-MIR** (поз. 4 в таблице):
  - Локальный контроллер для управления устройствами через инфракрасные команды (например, телевизоры, кондиционеры и другие ИК-совместимые устройства). Он может работать независимо или под управлением глобального контроллера Wiren Board.

#### Итого:
- **Глобальные контроллеры** (например, Wiren Board 6 или 7) координируют работу всей системы автоматизации, собирают данные и управляют подключёнными устройствами.
- **Локальные контроллеры** (например, WB-MR3, WB-MWAC) управляют конкретными функциями и устройствами в рамках системы, обеспечивая автономное или интегрированное управление в зависимости от настроек.

Контроллеры WirenBoard — это мощные и гибкие устройства, которые используются для автоматизации, мониторинга и управления в различных системах "умного дома", промышленной автоматизации и IoT-солюциях. Они обеспечивают централизованное управление разнообразными устройствами и датчиками. Вот основные принципы работы контроллеров в системе WirenBoard:

### Основные Компоненты и Принципы Работы

1. **Аппаратная Платформа:**
   - **Процессор и ОС:** Контроллеры WirenBoard основаны на ARM-процессорах и работают под управлением Linux (Debian), что делает их похожими на маленькие компьютеры с широкими возможностями программирования.
   - **Модульность:** Контроллеры могут быть расширены с помощью различных модулей ввода/вывода (WBIO), которые подключаются через специальные интерфейсы.

2. **Интерфейсы Связи:**
   - **Wired Connections:** Ethernet, RS-485, RS-232, 1-Wire, I2C, и Modbus для подключения различных датчиков и устройств.
   - **Wireless Connections:** Wi-Fi, ZigBee (через дополнительные модули), Bluetooth и другие технологии для беспроводного подключения.
   - **MQTT Protocol:** Использование MQTT для обмена сообщениями между устройствами и серверами, что позволяет легко интегрировать контроллер в различные системы IoT.

3. **Программирование и Конфигурация:**
   - **Rule Engine:** Встроенный движок правил позволяет создавать скрипты на языке, основанном на JavaScript, для автоматизации реакций на события в системе.
   - **Пользовательские Скрипты:** Поддержка Python, Bash и других языков позволяет писать сложные скрипты для управления логикой работы контроллера.

4. **Управление Устройствами:**
   - **Датчики и Актуаторы:** Контроллер может собирать данные с температурных датчиков, датчиков влажности, детекторов движения и других, а также управлять освещением, отоплением, системами вентиляции и другими актуаторами.
   - **Modbus Devices:** Широкая поддержка устройств Modbus RTU/TCP позволяет интегрировать в систему промышленное оборудование.

5. **Веб-Интерфейс и API:**
   - **Web Interface:** Пользовательский интерфейс на базе веб-технологий для настройки, мониторинга и управления контроллером через браузер.
   - **REST API:** Возможность удалённого управления и интеграции с другими системами через RESTful API.

6. **Безопасность:**
   - **Сетевая безопасность:** Возможности настройки firewall, VPN и других технологий для защиты данных и управления доступом.
   - **Обновления и Резервное Копирование:** Регулярные обновления ПО для устранения уязвимостей и функции резервного копирования для восстановления системы.

### Пример Работы Контроллера

Допустим, вам нужно автоматизировать систему умного освещения на базе WirenBoard:

1. **Подключение Устройств:**
   - Подключите светильники к реле-модулям WirenBoard.
   - Добавьте датчики движения через интерфейс 1-Wire или Modbus, в зависимости от модели.

2. **Настройка Логики:**
   - Используя Web UI, перейдите к разделу "Rules" или напишите скрипт на Python.
   - Создайте правило, которое включает свет, если датчик движения активирован и если текущее время находится в заданном диапазоне (например, с 18:00 до 23:00).

3. **Интеграция и Управление:**
   - Если система должна быть интегрирована с внешними сервисами, настройте MQTT-брокера или REST API для отправки команд и получения статусов.
   - Мониторьте состояние системы через Web UI или через внешние системы умного дома.

Эта модель работы показывает, как контроллеры WirenBoard могут быть центром автоматизации, собирая данные от датчиков, принимая решения на основе пользовательских скриптов и управляя физическими устройствами для создания интеллектуальных и эффективных систем.

